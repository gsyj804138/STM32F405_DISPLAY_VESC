屏幕硬件连接建议
屏幕型号：2.0寸 TFT，分辨率176x220，驱动芯片ILI9225，SPI接口
推荐引脚分配（STM32F405RGT6）：
oSCK（屏幕时钟）：PA5
oMOSI（屏幕数据）：PA7
oMISO（如有）：PA6（可悬空）
oCS（片选）：PA4
oRESET：PA1
oRS/DC（数据/命令）：PA2
oBL（背光）：PA3（可PWM调节亮度）
oVCC/GND：3.3V供电，GND接地

如需更改引脚，可在 TFT_22_ILI9225 初始化时调整参数。

2. VESC串口连接建议
推荐使用硬件串口：
oTX（STM32发送）：PA9（USART1_TX）
oRX（STM32接收）：PA10（USART1_RX）
oGND：共地
o波特率：115200
3. 按键/蜂鸣器/LED建议
按键：PA0、PA8、PB0（均可，建议加上拉电阻）
蜂鸣器/LED：PC13（或任意空闲GPIO）
本设备基于 STM32F405RGT6 微控制器，配备 2.0 寸 176×220 分辨率 ILI9225 彩色液晶屏，通过 ComEVesc 协议与 VESC 电调通讯，实时显示电动滑板/电动车的速度、电压、电流、里程、故障码等信息。支持多屏幕风格、单位切换和多语言显示，适用于多种应用场景。

---

## 二、硬件连接

### 1. 屏幕引脚（ILI9225）

| 功能   | 引脚名 | STM32F405RGT6 引脚 |
|--------|--------|--------------------|
| CS     | TFT_CS_PIN    | PA4  |
| RESET  | TFT_RST_PIN   | PA3  |
| RS/DC  | TFT_RS_PIN    | PA2  |
| LED    | TFT_LED_PIN   | PA1  |
| SCK    | TFT_SCK_PIN   | PA5  |
| MOSI   | TFT_MOSI_PIN  | PA7  |
| MISO   | TFT_MISO_PIN  | PA6  |

### 2. VESC 串口

| 功能 | STM32F405RGT6 引脚 |
|------|--------------------|
| TX   | PA9                |
| RX   | PA10               |

### 3. 按键

| 按键 | 引脚名 | STM32F405RGT6 引脚 |
|------|--------|--------------------|
| 1    | BUTTON_1_PIN | PB0 |
| 2    | BUTTON_2_PIN | PB1 |
| 3    | BUTTON_3_PIN | PB2 |

---

## 三、功能说明

### 1. 屏幕风格与布局

- 支持多种屏幕风格（默认、暗色、大字体）。
- 可切换不同数据展示界面（速度、电流、电压、里程、故障等）。
- 屏幕内容顺序、字体大小、颜色可自定义。

### 2. 单位切换

- 支持公制/英制单位切换（公里/英里）。
- 支持摄氏/华氏温度切换。
- 可通过按键或菜单动态切换单位。

### 3. 多语言支持

- 支持中英文界面切换。
- 所有主要数据项均有中英文显示。

### 4. VESC 数据实时显示

- 实时显示速度、电压、电流、温度、里程、故障码等信息。
- 支持多屏切换，满足不同用户需求。

### 5. 电池管理

- 实时显示电池电量百分比、已消耗电量、充电状态。
- 支持电池充满自动复位计数。

### 6. 数据存储

- 断电后自动保存里程、电量等数据，保证数据不丢失。

---

## 四、操作说明

### 1. 按键功能

- **按键1（PB0）**：长按可重置单次里程计数。
- **按键2（PB1）**：长按可重置电池消耗计数。
- **按键3（PB2）**：短按切换不同屏幕风格或数据界面。

> 按键可自定义为单位切换、语言切换等功能，具体可在菜单或固件中设置。

### 2. 单位与语言切换

- 进入设置菜单后，可通过按键选择单位（公里/英里）、温度单位（℃/℉）、界面语言（中文/英文）。
- 切换后所有数据和文本将自动适配所选单位和语言。

### 3. 屏幕风格切换

- 按键3短按可循环切换不同屏幕风格（默认、暗色、大字体）。
- 每种风格下数据展示顺序、字体、颜色均不同，满足不同视觉需求。

---

## 五、注意事项

1. **供电电压**：请确保所有外设均为 3.3V，避免损坏主控芯片。
2. **串口通讯**：VESC 串口波特率需设置为 115200，确保数据通讯稳定。
3. **按键防抖**：建议硬件上加上拉电阻，避免误触发。
4. **固件升级**：如需升级功能或界面，可通过 USB 或 SWD 仿真器下载新固件。

---

## 六、常见问题与解决

- **屏幕无显示**：检查供电和引脚连接，确认初始化参数正确。
- **数据不刷新**：确认 VESC 串口通讯正常，波特率设置为 115200。
- **按键无响应**：检查按键引脚和硬件连接，确认固件中已正确初始化。

---

## 七、定制与扩展

- 可根据实际需求定制屏幕内容、风格、单位和语言。
- 支持扩展蜂鸣器、LED、外部存储等功能。
- 如需更多功能或界面定制，请联系开发者或参考源代码进行修改。